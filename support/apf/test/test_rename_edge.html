<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test rename edge case</title>
        <script src="../apf.js"></script>
    </head>
    <body>
        <a:skin src="../skins.xml" media-path="../../../skins/platform/trunk/images/"
          image-path="../../../skins/platform/trunk/images/" icon-path="../icons/" />

        <a:appsettings debug="false" debug-teleport="true" name="remotetest" locking="optimistic"  />

        <a:model id="mdlFs" src="filesystem.xml" />

        <a:tree model="mdlFs" width="70%" height="200" onafterrename="alert('Rename correct? ' + (mdlFs.data.selectSingleNode('@caption') ? 'no' : 'yes'));">
            <a:bindings>
                <a:caption match="[@caption|@filename]" />
                <a:icon  match="[drive]"  value="drive.png" />
                <a:icon  match="[file]"   value="page_white.png" />
                <a:icon  match="[folder]" value="folder.png" />
                <a:empty match="[folder]" value="Drag a contact to this group." />
                <a:each  match="[drive|folder|file]" />
            </a:bindings>
        </a:tree>

        <p>Select an item from the tree and try to rename it.</p>
    </body>
</html>